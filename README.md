# To Do Timer

## ログ機能付きタイマーアプリ（Mac・Windows 対応）

![1](img/1.jpeg)

## 特徴

### ・ ｘ時間毎に「①いつ、②どんなタスクを、③どれだけの時間行っていたか」ログを取ることで作業工数の実績を計測

### ・ ミニマルデザイン・使いやすいUI

### ・ 2種類のアラーム音と音量調整が可能

## インストール方法

> [!WARNING]
> 本アプリを使用する場合は自己責任で使用してください。

<details>
<summary>Mac</summary>

1. **[ここから](https://liba-b.work/electron%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%9f%e3%83%ad%e3%82%b0%e6%a9%9f%e8%83%bd%e4%bb%98%e3%81%8d%e3%82%bf%e3%82%a4%e3%83%9e%e3%83%bc%e3%82%a2%e3%83%97%e3%83%aa%e3%81%ae%e9%96%8b%e7%99%ba/)** インストーラー（dmgファイル）をダウンロード  
ダブルクリックでインストーラーを起動し、アイコンをドラッグしてアプリを追加
1. ターミナルを起動し、次のコマンドを実行

    `xattr -rc /Applications/To\ Do\ Timer.app; echo $?`

    `0`が出力されればインストール完了

</details>

<details>
<summary>Windows</summary>

* **[ここから](https://liba-b.work/electron%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%9f%e3%83%ad%e3%82%b0%e6%a9%9f%e8%83%bd%e4%bb%98%e3%81%8d%e3%82%bf%e3%82%a4%e3%83%9e%e3%83%bc%e3%82%a2%e3%83%97%e3%83%aa%e3%81%ae%e9%96%8b%e7%99%ba/)** インストーラー（exeファイル）をダウンロード  
ダブルクリックでインストーラーを起動しアプリをインストールする  
※ システムにアプリをインストールせずに使用したい場合は、ポータブル版を使用してください。

</details>


## アンインストール方法

<details>
<summary>Mac</summary>

* アプリケーションフォルダから`To Do Timer.app`を削除する

</details>

<details>
<summary>Windows</summary>

* `プログラムの追加と削除`から`To Do Timer`を削除する

</details>

## 使用方法

* タイマー  
  1. 時間をクリックしタイマー時間を設定します。
  1. タイトルを入力します。  
  入力中に`Enter` を押すとフォーカスが外れます。
  1. STARTボタン押下でタイマーがスタートします。  
  STOPボタン押下でタイマーがストップします。  
  RESETボタン押下でタイマーがリセットします。  

* ログ保存  
  タイムアウトするとログが保存されます。  

  ![3](img/2.png)

  `CONTINUEボタン`を押下するとログ保存後にタイマーが再スタートします。  
  タイムアウト前にログを保存したい場合は`STOPボタン`を押下してから`SAVEボタン`を押下します。  

* ログ確認  
  アプリ画面右上の`Lボタン`を押下するとログが表示されます。  

  ![3](img/3.png)

  ログは`'タイマー開始時間 タイマー時間 タイトル'`の形式で記録されます。  
  本日の合計時間が表示されます。  

* アプリ設定  
  アプリの画面上で右クリックし、`Settings` をクリックすると設定画面が表示されます。  

  ![3](img/4.png)

  * 2種類のアラーム音の選択ができます。
  * アラーム音の音量を調整できます。
  * `本日の合計`のリセット時間を変更できます。  
    例：9 に設定した場合、朝の9時にリセットします。
  * Topmostにチェックを入れると画面がフロートします。

---

## 開発

1. $ git clone <https://github.com/LibertyReman/electron-to-do-timer.git>
1. $ cd electron-to-do-timer/
1. $ npm install
1. $ npm run start

## 設計

<details>
<summary>アクティビティ図</summary>

```mermaid
sequenceDiagram
    actor ユーザ
    participant メインプロセス
    participant レンダラープロセス

    ユーザ->>メインプロセス: アプリ起動
    メインプロセス->>メインプロセス: アプリ起動準備
    メインプロセス->>メインプロセス: アプリ設定情報読み込み
    メインプロセス->>レンダラープロセス: メイン画面の作成
    レンダラープロセス->>レンダラープロセス: メイン画面表示
    レンダラープロセス->>レンダラープロセス: ローカルストレージから<br>前回の設定時間とタイトルを取得

    ユーザ->>レンダラープロセス: <br><br>タイトル入力
    レンダラープロセス->>レンダラープロセス: タイトルをローカルストレージへ保存
    レンダラープロセス->>レンダラープロセス: STARTボタン有効化

    ユーザ->>レンダラープロセス: <br><br>STARTボタン押下
    レンダラープロセス->>レンダラープロセス: タイマー開始時の日時を記録
    レンダラープロセス->>レンダラープロセス: タイトル入力無効化
    レンダラープロセス->>レンダラープロセス: タイマー起動
    レンダラープロセス->>レンダラープロセス: タイムアップ
    レンダラープロセス->>レンダラープロセス: アラーム作動
    レンダラープロセス->>レンダラープロセス: モーダル画面表示

    ユーザ->>レンダラープロセス: <br><br>CONTINUEボタン押下
    レンダラープロセス->>レンダラープロセス: アラーム停止
    レンダラープロセス->>メインプロセス: ログ保存API実行
    メインプロセス->>メインプロセス: ログファイル書き込み
    レンダラープロセス->>レンダラープロセス: タイマー起動

    ユーザ->>レンダラープロセス: <br><br>CLOSEボタン押下
    レンダラープロセス->>レンダラープロセス: アラーム停止
    レンダラープロセス->>メインプロセス: ログ保存API実行
    メインプロセス->>メインプロセス: ログファイル書き込み

    ユーザ->>レンダラープロセス: <br><br>STOPボタン押下
    レンダラープロセス->>レンダラープロセス: タイマー停止
    レンダラープロセス->>レンダラープロセス: タイトル入力有効化

    ユーザ->>レンダラープロセス: <br><br>RESETボタン押下
    レンダラープロセス->>レンダラープロセス: タイマーリセット

    ユーザ->>レンダラープロセス: <br><br>SAVEボタン押下
    レンダラープロセス->>メインプロセス: ログ保存API実行
    メインプロセス->>メインプロセス: ログファイル書き込み

    ユーザ->>レンダラープロセス: <br><br>ログボタン押下
    レンダラープロセス->>メインプロセス: ログ画面作成API実行
    メインプロセス->>レンダラープロセス: ログ画面の作成
    レンダラープロセス->>レンダラープロセス: ログ画面表示
    レンダラープロセス->>レンダラープロセス: タブの初期化
    レンダラープロセス->>レンダラープロセス: ログファイル読み込み & 表示
    レンダラープロセス->>レンダラープロセス: チャート作成
    レンダラープロセス->>レンダラープロセス: 今日の合計時間を表示

    ユーザ->>レンダラープロセス: <br><br>Logsタブの日付入力
    レンダラープロセス->>レンダラープロセス: その日の合計時間を表示

    ユーザ->>レンダラープロセス: <br><br>Logsタブの＜＞ボタン押下
    レンダラープロセス->>レンダラープロセス: その日の合計時間を表示

    ユーザ->>レンダラープロセス: <br><br>Chartタブ押下
    レンダラープロセス->>レンダラープロセス: チャート表示
    レンダラープロセス->>レンダラープロセス: 今週の合計時間を表示

    ユーザ->>レンダラープロセス: <br><br>Chartタブの＜＞ボタン押下
    レンダラープロセス->>レンダラープロセス: チャート表示
    レンダラープロセス->>レンダラープロセス: その週の合計時間を表示

    ユーザ->>レンダラープロセス: <br><br>Searchタブ押下
    レンダラープロセス->>レンダラープロセス: ログファイル読み込み & 表示

    ユーザ->>レンダラープロセス: <br><br>Searchタブのログ検索入力
    レンダラープロセス->>レンダラープロセス: ログ検索結果の合計時間を表示

    ユーザ->>メインプロセス: <br><br>右クリック＞Settingsボタン押下
    メインプロセス->>レンダラープロセス: アプリ設定画面の作成
    レンダラープロセス->>レンダラープロセス: アプリ設定画面表示

    ユーザ->>レンダラープロセス: <br><br>アプリ設定画面のSAVEボタン押下
    レンダラープロセス->>メインプロセス: アプリ設定更新API実行
    メインプロセス->>メインプロセス: アプリ設定更新
    レンダラープロセス->>レンダラープロセス: アプリ設定画面を閉じる

    ユーザ->>レンダラープロセス: <br><br>アプリ設定画面のCANCELボタン押下
    レンダラープロセス->>レンダラープロセス: アプリ設定画面を閉じる

    ユーザ->>メインプロセス: <br><br>アプリ終了
    メインプロセス->>メインプロセス: アプリ表示位置保存
    メインプロセス->>メインプロセス: アプリ閉じる

```

</details>


## 使用ライブラリ・コンテンツ

* 時間選択：flatpickr - https://github.com/flatpickr/flatpickr
* 効果音：ポケットサウンド – https://pocket-se.info/

## ライセンス

* License: GNU General Public License v3.0
* License URI: <http://www.gnu.org/licenses/gpl-3.0.html>
* Author: KK

